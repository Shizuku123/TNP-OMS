<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add New Staff - Tahanan ng Pagmamahal OMS</title>
    <script type="module" src="firebase.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'red-primary': '#dc2626',
                        'red-secondary': '#ef4444',
                        'red-light': '#fef2f2'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <a href="index.html" class="flex items-center text-gray-600 hover:text-red-primary transition-colors">
                    <svg class="h-6 w-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </a>
                <h1 class="text-xl sm:text-2xl font-semibold text-gray-900 text-center flex-1">Add New Staff</h1>
                <div class="hidden sm:flex items-center opacity-0">
                    <svg class="h-6 w-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="max-w-4xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
        <!-- Success/Error Messages -->
        <div id="messageContainer" class="mb-4 hidden"></div>

        <form id="staffForm" class="space-y-6 sm:space-y-8">
            <!-- Photo Upload -->
            <div class="bg-white shadow rounded-lg p-4 sm:p-6">
                <h2 class="text-lg font-medium text-gray-900 mb-6">Photo</h2>
                <div class="flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-6">
                    <div class="shrink-0">
                        <img id="photoPreview" class="h-24 w-24 sm:h-32 sm:w-32 object-cover rounded-full" src="user.png" alt="Photo preview">
                    </div>
                    <div class="flex-1 w-full">
                        <label for="photo" class="block text-sm font-medium text-gray-700 mb-2">Upload Photo</label>
                        <input type="file" id="photo" name="photo" accept="image/*"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary">
                        <p class="mt-2 text-sm text-gray-500">JPG, PNG or GIF up to 2MB</p>
                    </div>
                </div>
            </div>

            <!-- Personal Information -->
            <div class="bg-white shadow rounded-lg p-4 sm:p-6">
                <h2 class="text-lg font-medium text-gray-900 mb-6">Personal Information</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
                    <div>
                        <label for="firstName" class="block text-sm font-medium text-gray-700 mb-2">First Name *</label>
                        <input type="text" id="firstName" name="firstName" required
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary">
                    </div>
                    <div>
                        <label for="middleName" class="block text-sm font-medium text-gray-700 mb-2">Middle Name</label>
                        <input type="text" id="middleName" name="middleName"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary">
                    </div>
                    <div>
                        <label for="lastName" class="block text-sm font-medium text-gray-700 mb-2">Last Name *</label>
                        <input type="text" id="lastName" name="lastName" required
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Gender *</label>
                        <div class="flex space-x-4">
                            <label class="flex items-center">
                                <input type="radio" name="gender" value="Male" required class="text-red-primary focus:ring-red-primary">
                                <span class="ml-2">Male</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="gender" value="Female" required class="text-red-primary focus:ring-red-primary">
                                <span class="ml-2">Female</span>
                            </label>
                        </div>
                    </div>
                    <div>
                        <label for="dateOfBirth" class="block text-sm font-medium text-gray-700 mb-2">Date of Birth *</label>
                        <input type="date" id="dateOfBirth" name="dateOfBirth" required
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary">
                    </div>
                    <div>
                        <label for="placeOfBirth" class="block text-sm font-medium text-gray-700 mb-2">Place of Birth</label>
                        <input type="text" id="placeOfBirth" name="placeOfBirth" placeholder="Municipality, City, Province"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary">
                    </div>
                    <div>
                        <label for="nationality" class="block text-sm font-medium text-gray-700 mb-2">Nationality</label>
                        <input type="text" id="nationality" name="nationality" value="Filipino"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary">
                    </div>
                    <div>
                        <label for="religion" class="block text-sm font-medium text-gray-700 mb-2">Religion</label>
                        <input type="text" id="religion" name="religion"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary">
                    </div>
                    <div>
                        <label for="civilStatus" class="block text-sm font-medium text-gray-700 mb-2">Civil Status</label>
                        <select id="civilStatus" name="civilStatus"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary">
                            <option value="">Select status</option>
                            <option value="Single">Single</option>
                            <option value="Married">Married</option>
                            <option value="Separated">Separated</option>
                            <option value="Divorced">Divorced</option>
                            <option value="Widowed">Widowed</option>
                        </select>
                    </div>
                    <div class="sm:col-span-2 lg:col-span-3">
                        <label for="currentAddress" class="block text-sm font-medium text-gray-700 mb-2">Current Address *</label>
                        <textarea id="currentAddress" name="currentAddress" rows="3" required
                                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary"></textarea>
                    </div>
                    <div>
                        <label for="contactNumber" class="block text-sm font-medium text-gray-700 mb-2">Contact Number *</label>
                        <input type="tel" id="contactNumber" name="contactNumber" required
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary">
                    </div>
                    <div>
                        <label for="emailAddress" class="block text-sm font-medium text-gray-700 mb-2">Email Address *</label>
                        <input type="email" id="emailAddress" name="emailAddress" required
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary">
                    </div>
                </div>
            </div>

            <!-- Employment Information -->
            <div class="bg-white shadow rounded-lg p-4 sm:p-6">
                <h2 class="text-lg font-medium text-gray-900 mb-6">Employment Information</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
                    <div>
                        <label for="position" class="block text-sm font-medium text-gray-700 mb-2">Position *</label>
                        <select id="position" name="position" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary">
                            <option value="">Select position</option>
                            <option value="Director">Director</option>
                            <option value="Assistant Director">Assistant Director</option>
                            <option value="Social Worker">Social Worker</option>
                            <option value="Child Care Worker">Child Care Worker</option>
                            <option value="Teacher">Teacher</option>
                            <option value="Nurse">Nurse</option>
                            <option value="Cook">Cook</option>
                            <option value="Security Guard">Security Guard</option>
                            <option value="Maintenance">Maintenance</option>
                            <option value="Administrative Assistant">Administrative Assistant</option>
                            <option value="Counselor">Counselor</option>
                        </select>
                    </div>
                    <div>
                        <label for="department" class="block text-sm font-medium text-gray-700 mb-2">Department / Unit</label>
                        <select id="department" name="department"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary">
                            <option value="">Select department</option>
                            <option value="Administration">Administration</option>
                            <option value="Child Care">Child Care</option>
                            <option value="Education">Education</option>
                            <option value="Health Services">Health Services</option>
                            <option value="Social Services">Social Services</option>
                            <option value="Kitchen">Kitchen</option>
                            <option value="Maintenance">Maintenance</option>
                            <option value="Security">Security</option>
                        </select>
                    </div>
                    <div>
                        <label for="employmentStatus" class="block text-sm font-medium text-gray-700 mb-2">Employment Status</label>
                        <select id="employmentStatus" name="employmentStatus"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary">
                            <option value="">Select status</option>
                            <option value="Regular">Regular</option>
                            <option value="Contractual">Contractual</option>
                            <option value="Part-time">Part-time</option>
                            <option value="Probationary">Probationary</option>
                        </select>
                    </div>
                    <div>
                        <label for="dateHired" class="block text-sm font-medium text-gray-700 mb-2">Date Hired</label>
                        <input type="date" id="dateHired" name="dateHired"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary">
                    </div>
                    <div>
                        <label for="assignedSchedule" class="block text-sm font-medium text-gray-700 mb-2">Assigned Schedule</label>
                        <input type="text" id="assignedSchedule" name="assignedSchedule" placeholder="e.g., Monday-Friday 8AM-5PM"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary">
                    </div>
                    <div>
                        <label for="supervisor" class="block text-sm font-medium text-gray-700 mb-2">Supervisor</label>
                        <input type="text" id="supervisor" name="supervisor"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary">
                    </div>
                </div>
            </div>

            <!-- Restriction Codes -->
            <div class="bg-white shadow rounded-lg p-4 sm:p-6">
                <h2 class="text-lg font-medium text-gray-900 mb-6">Features Granted</h2>

                <div class="mb-6">
                    <h3 class="font-semibold text-gray-700 mb-2">Recording Sections</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                        <label class="flex items-center">
                            <input type="checkbox" name="featureGranted[]" value="Add New Child" class="mr-2 rounded text-red-primary focus:ring-red-primary">
                            <span>Add New Child</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="featureGranted[]" value="Add New Staff" class="mr-2 rounded text-red-primary focus:ring-red-primary">
                            <span>Add New Staff</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="featureGranted[]" value="Add New Volunteer" class="mr-2 rounded text-red-primary focus:ring-red-primary">
                            <span>Add New Volunteer</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="featureGranted[]" value="Record Donation" class="mr-2 rounded text-red-primary focus:ring-red-primary">
                            <span>Record Donation</span>
                        </label>
                    </div>
                </div>

                <div>
                    <h3 class="font-semibold text-gray-700 mb-2">Record Viewing</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                        <label class="flex items-center">
                            <input type="checkbox" name="featureGranted[]" value="Child Records" class="mr-2 rounded text-red-primary focus:ring-red-primary">
                            <span>Child Records</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="featureGranted[]" value="Staff Records" class="mr-2 rounded text-red-primary focus:ring-red-primary">
                            <span>Staff Records</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="featureGranted[]" value="Volunteer Records" class="mr-2 rounded text-red-primary focus:ring-red-primary">
                            <span>Volunteer Records</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="featureGranted[]" value="Donation Records" class="mr-2 rounded text-red-primary focus:ring-red-primary">
                            <span>Donation Records</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="featureGranted[]" value="Donors Records" class="mr-2 rounded text-red-primary focus:ring-red-primary">
                            <span>Donors Records</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="featureGranted[]" value="Inventory Records" class="mr-2 rounded text-red-primary focus:ring-red-primary">
                            <span>Inventory Records</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="featureGranted[]" value="Expenses Records" class="mr-2 rounded text-red-primary focus:ring-red-primary">
                            <span>Expenses Records</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="featureGranted[]" value="Discharged Children Records" class="mr-2 rounded text-red-primary focus:ring-red-primary">
                            <span>Discharged Children Records</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="featureGranted[]" value="Archive Records" class="mr-2 rounded text-red-primary focus:ring-red-primary">
                            <span>Archive Records</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="featureGranted[]" value="Staff Attendance" class="mr-2 rounded text-red-primary focus:ring-red-primary">
                            <span>Staff Attendance</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Account Creation -->
            <div class="bg-white shadow rounded-lg p-4 sm:p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-lg font-medium text-gray-900">Account Creation</h2>
                    <div class="flex items-center">
                        <label for="createAccountToggle" class="mr-3 text-sm font-medium text-gray-700">Create system account?</label>
                        <button type="button" id="createAccountToggle" class="relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent bg-gray-200 transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-red-primary focus:ring-offset-2" role="switch" aria-checked="false">
                            <span class="sr-only">Create account</span>
                            <span id="toggleIndicator" class="pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out translate-x-0"></span>
                        </button>
                    </div>
                </div>
                
                <div id="accountFields" class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 hidden">
                    <div>
                        <label for="username" class="block text-sm font-medium text-gray-700 mb-2">Username *</label>
                        <input type="text" id="username" name="username"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-primary focus:border-red-primary">
                    </div>
                    
                </div>
                
                <div id="accountDisabledMessage" class="text-sm text-gray-500">
                    Account creation is disabled. The staff member will not have system access.
                </div>
            </div>

            <!-- Submit Button -->
            <div class="flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-4">
                <a href="staff-records.html" class="px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors text-center">
                    Cancel
                </a>
                <button type="submit" class="px-6 py-2 bg-red-primary text-white rounded-md hover:bg-red-700 transition-colors">
                    Add Staff Record
                </button>
            </div>
        </form>
    </div>

    <script type="module">
        import {
            db,
            collection,
            getDocs,
            setDoc,
            doc,
            auth
        } from './firebase.js';
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

        let createAccountEnabled = false;

        // Generate unique staff ID by checking Firestore
        async function generateStaffId() {
            const staffCol = collection(db, 'users');
            const snapshot = await getDocs(staffCol);

            let lastId = 0;
            snapshot.forEach(docSnap => {
                const staff = docSnap.data();
                if (staff.staffId && /^ST\d+$/.test(staff.staffId)) {
                    const num = parseInt(staff.staffId.replace('ST', ''), 10);
                    if (num > lastId) lastId = num;
                }
            });
            return `ST${String(lastId + 1).padStart(3, '0')}`;
        }

        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            document.getElementById('dateHired').value = new Date().toISOString().split('T')[0];
        });

        function setupEventListeners() {
            // Photo preview functionality
            document.getElementById('photo').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('photoPreview').src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Account creation toggle
            document.getElementById('createAccountToggle').addEventListener('click', function() {
                createAccountEnabled = !createAccountEnabled;
                updateAccountToggle();
            });

            // Form submission
            document.getElementById('staffForm').addEventListener('submit', handleSubmit);
        }

        function updateAccountToggle() {
            const toggle = document.getElementById('createAccountToggle');
            const indicator = document.getElementById('toggleIndicator');
            const accountFields = document.getElementById('accountFields');
            const disabledMessage = document.getElementById('accountDisabledMessage');
            const usernameField = document.getElementById('username');
            // const passwordField = document.getElementById('password');

            if (createAccountEnabled) {
                toggle.classList.remove('bg-gray-200');
                toggle.classList.add('bg-red-primary');
                indicator.classList.remove('translate-x-0');
                indicator.classList.add('translate-x-5');
                toggle.setAttribute('aria-checked', 'true');
                
                accountFields.classList.remove('hidden');
                disabledMessage.classList.add('hidden');
                usernameField.required = true;
                // passwordField.required = true;
            } else {
                toggle.classList.remove('bg-red-primary');
                toggle.classList.add('bg-gray-200');
                indicator.classList.remove('translate-x-5');
                indicator.classList.add('translate-x-0');
                toggle.setAttribute('aria-checked', 'false');
                
                accountFields.classList.add('hidden');
                disabledMessage.classList.remove('hidden');
                usernameField.required = false;
                // passwordField.required = false;
                usernameField.value = '';
                // passwordField.value = '';
            }
        }

        async function handleSubmit(e) {
        e.preventDefault();

        const formData = new FormData(e.target);
        const data = {};

        // Collect form data (plain text only, not files)
        for (let [key, value] of formData.entries()) {
            if (key !== "photo" && key !== "featureGranted[]") {
                data[key] = value;
            }
        }

        // Collect restrictions array
        data.featureGranted = [];
        document.querySelectorAll('input[name="featureGranted[]"]:checked').forEach(el => {
            data.featureGranted.push(el.value);
        });

        // Add system fields
        data.staffId = await generateStaffId();
        data.dateAdded = new Date().toISOString().split('T')[0];
        data.createAccount = createAccountEnabled ? '1' : '0';

        // Handle photo base64
        const photoFile = document.getElementById('photo').files[0];
        if (photoFile) {
            data.photoString = await new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsDataURL(photoFile);
            });
        } else {
            data.photoString = "";
        }

        saveStaffRecord(data);
    }

        async function saveStaffRecord(data) {
            try {
                // Validate required fields
                const requiredFields = ['firstName', 'lastName', 'gender', 'dateOfBirth', 'currentAddress', 'contactNumber', 'emailAddress', 'position'];
                if (createAccountEnabled) {
                    requiredFields.push('username');
                }
                for (const field of requiredFields) {
                    if (!data[field]) {
                        showMessage(`Please fill in the ${field.replace(/([A-Z])/g, ' $1').toLowerCase()} field.`, 'error');
                        return;
                    }
                }

                let userId = crypto.randomUUID();

                // If account creation is enabled, create user in Firebase Auth
                if (createAccountEnabled) {
                    // Format password: TNPOMS@BirthdateDDMMYYYY
                    const dob = data.dateOfBirth; // YYYY-MM-DD
                    const [yyyy, mm, dd] = dob.split('-');
                    const password = `TNPOMS@${dd}${mm}${yyyy}`;
                    try {
                        const userCredential = await createUserWithEmailAndPassword(auth, data.emailAddress, password);
                        userId = userCredential.user.uid;
                    } catch (error) {
                        if (error.code === 'auth/email-already-in-use') {
                            showMessage('Email address is already in use.', 'error');
                        } else {
                            showMessage('Error creating user account: ' + error.message, 'error');
                        }
                        return;
                    }
                }

                // Prepare Firestore document fields
                const staffDoc = {
                    uid: userId,
                    firstName: data.firstName || "",
                    middleName: data.middleName || "",
                    lastName: data.lastName || "",
                    emailAddress: data.emailAddress || "",
                    contactNumber: data.contactNumber || "",
                    username: data.username || "",
                    photoString: data.photoString || "",
                    gender: data.gender || "",
                    civilStatus: data.civilStatus || "",
                    nationality: data.nationality || "",
                    religion: data.religion || "",
                    placeOfBirth: data.placeOfBirth || "",
                    dateOfBirth: data.dateOfBirth || "",
                    currentAddress: data.currentAddress || "",
                    assignedSchedule: data.assignedSchedule || "",
                    department: data.department || "",
                    position: data.position || "",
                    supervisor: data.supervisor || "",
                    employmentStatus: data.employmentStatus || "",
                    createAccount: data.createAccount || "0",
                    dateAdded: data.dateAdded || "",
                    dateHired: data.dateHired || "",
                    role: "staff",
                    isActive: true,
                    isBlocked: false,
                    otp: "",
                    isVerified: false,
                    firstTimeLogin: false,
                    featureGranted: data.featureGranted || [],
                };

                // Save to Firestore: users/{userId}
                const userRef = doc(collection(db, 'users'), userId);
                await setDoc(userRef, staffDoc);

                showMessage(`Staff record${createAccountEnabled ? " and account" : ""} created successfully!`, 'success');
                document.getElementById('staffForm').reset();
                document.getElementById('photoPreview').src = '/placeholder.svg?height=128&width=128';
                document.getElementById('dateHired').value = new Date().toISOString().split('T')[0];
                document.getElementById('nationality').value = 'Filipino';
                createAccountEnabled = false;
                updateAccountToggle();

                setTimeout(() => {
                    window.location.href = 'staff-records.html';
                }, 2000);

            } catch (error) {
                console.error('Error saving staff record:', error);
                showMessage('Error saving staff record. Please try again.', 'error');
            }
        }

        function showMessage(message, type) {
            const messageContainer = document.getElementById('messageContainer');
            const bgColor = type === 'success' ? 'bg-green-100 border-green-400 text-green-700' : 'bg-red-100 border-red-400 text-red-700';
            messageContainer.innerHTML = `<div class="${bgColor} border px-4 py-3 rounded">${message}</div>`;
            messageContainer.classList.remove('hidden');
            setTimeout(() => {
                messageContainer.classList.add('hidden');
            }, 5000);
        }
    </script>
</body>
</html>